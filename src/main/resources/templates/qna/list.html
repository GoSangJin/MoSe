<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main}"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Q&amp;A Page</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="/assets/img/favicon.png" rel="icon">
    <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link href="/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="/assets/css/main.css" rel="stylesheet">

    <style>
        .card {
            border: 1px solid #ccc;
            margin: 10px 0;
            border-radius: 5px;
        }
        .card-header2 {
            background-color: #f7f7f7;
            padding: 15px;
            cursor: pointer;
        }
        .q-tit {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .q-tit li {
            font-weight: bold;
        }
        .accordion-btn {
            background: none;
            border: none;
            font-size: 14px;
            color: #007bff;
        }
        .collapse {
            display: none;
        }
        .collapse.show {
            display: block;
        }
        .card-body {
            padding: 15px;
            background-color: #fff;
        }
        .popup-setting-box {
            display: none;
        }
        .search-container {
            margin-bottom: 20px;
        }
        .search_keyword {
            width: calc(100% - 50px);
            display: inline-block;
            margin-right: 10px;
        }
        .search_btn {
            display: inline-block;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            padding: 10px 20px;
        }
        .search_btn .icon-btn {
            vertical-align: middle;
        }
        .pagination-container {
            margin-top: 20px;
        }
    </style>
    <script>
        function funcClick(cardId) {
            var card = document.getElementById(cardId);
            var collapseDiv = card.querySelector('.collapse');
            collapseDiv.classList.toggle('show');
        }

        function funcView(title, content) {
            alert('Question: ' + title + '\nAnswer: ' + content);
        }
    </script>
    <script>
        function funcClick(cardId) {
            var card = document.getElementById(cardId);
            var collapseDiv = card.querySelector('.collapse');
            collapseDiv.classList.toggle('show');
        }

        function funcView(title, content) {
            alert('Question: ' + title + '\nAnswer: ' + content);
        }
    </script>
</head>
<body>
<script>
    (function() {
        var ws = new WebSocket('ws://' + window.location.host +
            '/jb-server-page?reloadMode=RELOAD_ON_SAVE&'+
            'referrer=' + encodeURIComponent(window.location.pathname));
        ws.onmessage = function (msg) {
            if (msg.data === 'reload') {
                window.location.reload();
            }
            if (msg.data.startsWith('update-css ')) {
                var messageId = msg.data.substring(11);
                var links = document.getElementsByTagName('link');
                for (var i = 0; i < links.length; i++) {
                    var link = links[i];
                    if (link.rel !== 'stylesheet') continue;
                    var clonedLink = link.cloneNode(true);
                    var newHref = link.href.replace(/(&|\?)jbUpdateLinksId=\d+/, "$1jbUpdateLinksId=" + messageId);
                    if (newHref !== link.href) {
                        clonedLink.href = newHref;
                    }
                    else {
                        var indexOfQuest = newHref.indexOf('?');
                        if (indexOfQuest >= 0) {
                            // to support ?foo#hash
                            clonedLink.href = newHref.substring(0, indexOfQuest + 1) + 'jbUpdateLinksId=' + messageId + '&' +
                                newHref.substring(indexOfQuest + 1);
                        }
                        else {
                            clonedLink.href += '?' + 'jbUpdateLinksId=' + messageId;
                        }
                    }
                    link.replaceWith(clonedLink);
                }
            }
        };
    })();
</script>

<div layout:fragment="content">
    <main class="main">
        <!-- Page Title -->
        <div class="page-title light-background">
            <div class="container">
                <h1>Q&A</h1>
                <nav class="breadcrumbs">
                    <ol>
                        <li><a th:href="@{/}">메인</a></li>
                        <li class="current">Q&A</li>
                    </ol>
                </nav>
            </div>
        </div><!-- End Page Title -->

        <!-- Services 2 Section -->
        <section id="services-2" class="services-2 section">

            <div class="container">
                <div class="row justify-content-center" data-aos="fade-up">
                    <div class="col-md-8 col-lg-6">
                        <h1 class="mb-3">Q&A</h1>
                        <form th:action="@{/qna/new}" method="post" enctype="multipart/form-data">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h1 class="text-center w-80">자주묻는 질문</h1>
                                <a sec:authorize="isAuthenticated()" class="btn btn-primary btn-sm" th:href="@{/qna/new}">게시글등록</a>
                            </div>
                            <a th:href="@{/qna/insert}" class="btn btn-primary">등록</a>

                            <div id="accordion">
                                <div th:each="data : ${list}">
                                    <div class="card mb-3" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                                        <div class="card-header">
                                            <a class="btn" data-bs-toggle="collapse" th:href="|#collapse_${data.id}|">
                                                <strong th:text="${data.title}"></strong>
                                            </a>
                                        </div>
                                        <div th:id="|collapse_${data.id}|" class="collapse" data-bs-parent="#accordion">
                                            <div class="card-body">
                                                <p th:text="${data.content}"></p> <!-- Content of the Q&A -->
                                                <input type="hidden" name="id" th:value="${data.id}">
                                            </div>
                                            <div class="card-footer text-right" sec:authorize="hasAnyRole('admin','master')">
                                                <button type="button" class="btn btn-warning btn-sm" th:onclick="|location.href='/qna/update/' + ${data.id}|">수정</button>
                                                <button type="button" class="btn btn-danger btn-sm" th:onclick="|location.href='/qna/delete/' + ${data.id}|">삭제</button>
                                            </div>
                                        </div>
                                    </div>



                </div>
            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>


        <!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>


