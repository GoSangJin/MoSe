<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main}">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>회원 정보 목록</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="/assets/img/favicon.png" rel="icon">
    <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&family=Lato:wght@100;300;400;700&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link href="/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="/assets/css/main.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        .custom-select {
            width: 150px; /* 드롭다운 너비 조정 */
        }
        .search-input {
            width: 200px; /* 검색어 입력 필드 너비 조정 */
        }
        .search-form {
            display: flex;
            align-items: center;
            gap: 15px; /* 요소 간의 간격 조정 */
        }
        .search-form .form-group {
            display: flex;
            align-items: center;
            margin: 0; /* 폼 그룹 간의 기본 여백 제거 */
        }
        .search-form label {
            margin-right: 10px; /* 라벨과 입력 필드 간의 간격 조정 */
        }
        .search-form .btn {
            margin-left: 10px; /* 버튼과 필드 간의 간격 조정 */
        }
        .user-info .form-inline {
            display: flex;
            align-items: center; /* 수직 정렬 */
            gap: 10px; /* 요소 간의 간격 조정 */
        }
        .user-info .form-inline select {
            margin-right: 10px; /* 드롭다운과 버튼 간의 간격 조정 */
            width: 100px; /* 드롭다운 너비 조정 */
        }
        .user-info .form-inline .btn {
            padding: 0.2rem 0.5rem; /* 버튼 패딩 조정 */
            font-size: 0.8rem; /* 버튼 폰트 크기 조정 */
        }
        .page-title h1 {
            display: flex;
            align-items: center;
            gap: 10px; /* 제목과 링크 간의 간격 조정 */
        }
        .page-title h1 a {
            color: #007bff; /* 링크 색상 설정 */
            text-decoration: none; /* 링크 기본 밑줄 제거 */
        }
        .page-title h1 a:hover {
            text-decoration: underline; /* 링크에 마우스를 올렸을 때 밑줄 추가 */
        }
    </style>
</head>

<body class="report-page">

<div layout:fragment="content">
    <main class="main">

        <!-- Page Title -->
        <div class="page-title light-background">
            <div class="container">
                <h1>
                    <a th:href="@{/admin/user_info}">회원 정보</a> |
                    <a th:href="@{/admin/board_suggest}">건의글</a> |
                    <a th:href="@{/admin/report}">신고글</a>
                </h1>
                <nav class="breadcrumbs">
                    <ol>
                        <li><a th:href="@{/}">메인</a></li>
                        <li class="current">신고글</li>
                    </ol>
                </nav>
            </div>
        </div><!-- End Page Title -->

        <!-- User Info Section -->
        <section id="report" class="report section">
            <div class="container">
                <div class="row justify-content-center" data-aos="fade-up">
                    <div class="col-md-12 col-lg-12">
                        <div class="container">
                            <h1>신고된 게시글 목록</h1>
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>게시글 제목</th>
                                    <th>설명</th>
                                    <th>신고자</th>
                                    <th>처리</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="report : ${reports}">
                                    <th th:text="${report.id}">ID</th>
                                    <th>
                                        <a th:href="@{/board/view(id=${report.boardId})}">
                                            <p class="text" th:text="${report.boardTitle}"></p>
                                        </a>
                                    </th>
                                    <th>
                                        <a th:href="@{/admin/report_content(id=${report.id})}">
                                            <p class="text" th:text="${report.description}"></p>
                                        </a>
                                    </th>
                                    <th th:text="${report.reporterUsername}">신고자</th>
                                    <!-- 처리 버튼 -->
                                    <th>
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#suspensionModal"
                                                th:onclick="'setReportId(' + ${report.id} + ')'">신고 처리</button>
                                    </th>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Modal -->
        <div id="suspensionModal" class="modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">신고 처리</h5>
                        <button type="button" class="close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form th:action="@{/admin/handleReport}" method="post">
                            <input type="hidden" id="reportId" name="reportId">
                            <div class="form-group">
                                <label for="suspensionType">처분 유형:</label>
                                <select id="suspensionType" name="suspensionType" class="form-control">
                                    <option value="3일">3일</option>
                                    <option value="7일">7일</option>
                                    <option value="한달">한 달</option>
                                    <option value="영구정지">영구 정지</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-danger">처리</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </main>
</div>
</body>

</html>